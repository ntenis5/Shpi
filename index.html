<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="UTF-8">
  <title>Prona në Glob</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #000;
      color: white;
      overflow: hidden;
    }

    #globeWrapper {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 250px;
      height: 250px;
      transform: translate(-50%, -50%);
      z-index: 2;
      pointer-events: none;
    }

    #globeViz {
      width: 100%;
      height: 100%;
      pointer-events: none;
      border-radius: 50%;
    }

    #categoryCircle {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 500px;
      height: 500px;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 1;
    }

    .orbit-button {
      position: absolute;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: orange;
      color: black;
      font-weight: bold;
      border: none;
      pointer-events: auto;
      cursor: pointer;
      z-index: 3;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .orbit-button:hover {
      background: darkorange;
    }
  </style>
</head>
<body>

<!-- Globi në qendër -->
<div id="globeWrapper">
  <div id="globeViz"></div>
</div>

<!-- Kategoritë përreth -->
<div id="categoryCircle">
  <button class="orbit-button" onclick="filterByCategory('Shtëpi')">Shtëpi</button>
  <button class="orbit-button" onclick="filterByCategory('Vilë')">Vilë</button>
  <button class="orbit-button" onclick="filterByCategory('Apartament')">Apartament</button>
  <button class="orbit-button" onclick="filterByCategory('Magazinë')">Magazinë</button>
  <button class="orbit-button" onclick="filterByCategory('Kapanon')">Kapanon</button>
  <button class="orbit-button" onclick="filterByCategory('Parking')">Parking</button>
  <button class="orbit-button" onclick="filterByCategory('Parcelë')">Parcelë</button>
</div>

<!-- Libraritë -->
<script src="https://unpkg.com/three"></script>
<script src="https://unpkg.com/globe.gl"></script>

<script>
  // Inicimi i globit
  const globe = Globe()(document.getElementById('globeViz'))
    .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
    .backgroundColor('#000')
    .pointOfView({ lat: 0, lng: 0, altitude: 2 })
    .enableZoom(false); // Ndalo zoom-in/out

  // Simulim i të dhënave
  const properties = [
    { category: 'Shtëpi', city: 'Tiranë', price: 150000, lat: 41.33, lng: 19.82 },
    { category: 'Vilë', city: 'Durrës', price: 250000, lat: 41.32, lng: 19.44 },
    { category: 'Apartament', city: 'Vlorë', price: 85000, lat: 40.47, lng: 19.49 }
  ];

  globe.pointsData(properties)
    .pointLat(d => d.lat)
    .pointLng(d => d.lng)
    .pointAltitude(0.05)
    .pointColor(() => 'orange')
    .pointLabel(d => `${d.category}<br>${d.city}<br>€${d.price.toLocaleString('sq-AL')}`);

  function filterByCategory(cat) {
    const filtered = properties.filter(p => p.category === cat);
    globe.pointsData(filtered);
  }

  // Vendosja orbitës
  const orbitButtons = document.querySelectorAll('.orbit-button');
  const radius = 200;
  orbitButtons.forEach((btn, i) => {
    const angle = (i / orbitButtons.length) * 2 * Math.PI;
    const x = Math.cos(angle) * radius;
    const y = Math.sin(angle) * radius;
    btn.style.left = `calc(50% + ${x}px - 45px)`; // 45 = gjysma e 90
    btn.style.top = `calc(50% + ${y}px - 45px)`;
  });
</script>

</body>
</html>
